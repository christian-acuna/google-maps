<!DOCTYPE html>
<!-- This is the corresponding "starter code" for 04_Hello Map in Udacity and Google's Maps
API Course, Lesson 1 -->
<html>
<head>
  <title>Hello World</title>
  <meta name="viewport" content="initial-scale=1.0">
  <meta charset="utf-8">
 <!-- styles put here, but you can include a CSS file and reference it instead! -->
  <style type="text/css">
   html, body { height: 100%; margin: 0; padding: 0; }
   #map {
     height: 100%;
     bottom: 0px;
     left: 362px;
     position: absolute;
     right: 0px;
    }

   .options-box {
     background: #fff;
     /*border: 1px solid #999;*/
     border-radius: 3px;
     height: 100%;
     line-height: 35px;
     padding: 10px 10px 30px 10px;
     text-align: left;
     width: 340px;
   }
  </style>
 </head>
<body>
  <div class="container">
    <div class="options-box">
      <h1>Find Pour New NYC Home</h1>
      <div>
        <input type="button" value="Show Listings" id="show-listing">
        <input type="button" value="Hide Listings" id="hide-listing">
      </div>
    </div>
    <div id="map"></div>
  </div>
  <script>

var map;
var markers = [];
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
      center: {
          lat: 40.7413549,
          lng: -73.9980243999999
        },
      zoom: 13
    });

  var locations = [
    {title: 'Park Ave Penthouse', location: {lat: 40.7713204, lng: -73.9632393}},
    {title: 'Chelsea Loft', location: {lat: 40.7444883, lng: -73.9949465}},
    {title: 'Union Square Open Floor Plan', location: {lat: 40.7347065, lng: -73.9895759}}
  ];

  var largeInfowindow = new google.maps.InfoWindow();


  for (var i = 0; i < locations.length; i++) {
    var position = locations[i].location;
    var title = locations[i].title;

    var marker = new google.maps.Marker({
      position: position,
      title: title,
      animation: google.maps.Animation.DROP,
      id: i
    });

    markers.push(marker);
    marker.addListener('click', function() {
      populateInfoWindow(this, largeInfowindow);
    });
  }

  document.getElementById('show-listing').addEventListener('click', showListings);
  document.getElementById('hide-listing').addEventListener('click', hideListings);
}

function populateInfoWindow(marker, infowindow) {
  if (infowindow.marker != marker) {
    infowindow.marker = marker;
    infowindow.setContent('<div>' + marker.title + '</div>');
    infowindow.open(map, marker);
    infowindow.addListener('closeclick', function() {
      infowindow.setMarker(null);
    });
  }
}

function showListings() {
  var bounds = new google.maps.LatLngBounds();
  for (var i = 0; i < markers.length; i++) {
    markers[i].setMap(map);
    bounds.extend(markers[i].position);
  }
  map.fitBounds(bounds);
}

function hideListings() {
  for(var i = 0; i < markers.length; i++) {
    markers[i].setMap(null);
  }
}
  </script>

   <!--TODO: Load the JS API ASYNCHRONOUSLY below.-->
   <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDFNEbCIajW_75HYkGBCYudNr1-5hp3J5E&v=3&callback=initMap"
   async defer></script>
   <script>
   </script>
 </body>
</html>
